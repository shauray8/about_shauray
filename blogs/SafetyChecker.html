<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Safety Checker for Diffusion Based Models</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Musings of a Computer Scientist.">
    <link rel="canonical" href="http://karpathy.github.io/2022/03/14/lecun1989/">
    <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Andrej Karpathy blog posts" />
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="main.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-3698471-23', 'auto');
      ga('send', 'pageview');
    </script>

</head>


    <body>

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="./blog.html">We Must Know, We Will Know</a>
    
</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>SDXLs, Did you ever stop to think about the safety checks on these things?</h1>
    <p class="meta">Apr 24, 2024</p>
  </header>

  <article class="post-content">
  <style>
.post-header h1 {
    font-size: 35px;
}
.post pre,
.post code {
    background-color: #fcfcfc;
    font-size: 13px; /* make code smaller for this post... */
}
</style>

<p>This post is from my twitter, I wrote it a while back and here's a little more elaborate version of that same, here's a better explaination for how safety checker works!</p>
<center>
<blockquote class="twitter-tweet" data-theme="dark"><p lang="en" dir="ltr" width=100%>SDXLs, Did you ever stop to think about the safety checks on these things? Of course not, you&#39;re too busy making anime portraits. Well let me enlighten you - their &#39;safety&#39; is an embarrassing joke. A Thread - 1/N<a href="https://twitter.com/hashtag/SDXL?src=hash&amp;ref_src=twsrc%5Etfw">#SDXL</a> <a href="https://twitter.com/hashtag/SD15?src=hash&amp;ref_src=twsrc%5Etfw">#SD15</a> <a href="https://twitter.com/hashtag/AI?src=hash&amp;ref_src=twsrc%5Etfw">#AI</a> <a href="https://twitter.com/hashtag/AIart?src=hash&amp;ref_src=twsrc%5Etfw">#AIart</a></p>&mdash; Shauray (e/acc) (@Shauray7) <a href="https://twitter.com/Shauray7/status/1778753104839610761?ref_src=twsrc%5Etfw">April 12, 2024</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</center>
<h3>Introduction</h3>
<p>In the world of AI, where algorithms roam freely, safety checkers stand as gatekeepers, tasked with filtering out the undesirable and preserving the sanctity of our digital spaces. However, beneath their seemingly straightforward task lies a realm of under-engineered piece of garbage. Here we delve deep into the mathematical underpinnings while exploring the theoretical foundations that underlie their operation.</p>
<h3>Mathematical Framework:</h3>
<p>At the heart of safety checkers lies the mathematical machinery that drives their decision-making process. Central to this framework are CLIP embeddings, which serve as numerical representations of textual or visual data. These embeddings, denoted as E encode the essence of the input content, enabling comparisons and evaluations. The cosine distance, a fundamental metric in vector space analysis, measures the angular separation between embeddings: </p>
<p>         \( \text{Cosine Distance}(\mathbf{E}_i, \mathbf{E}_j) = \frac{\mathbf{E}_i \cdot \mathbf{E}_j}{\| \mathbf{E}_i \| \cdot \| \mathbf{E}_j \|} \) </p>
<p>This metric forms the cornerstone of similarity assessment, allowing safety checkers to gauge the likeness between the input content and predefined tokens denoting safe \((\mathbf{T}_s)\) or unsafe \((\mathbf{T}_u)\) categories. However, the efficacy of this approach hinges on the sensitivity of the cosine distance to nuances in the data distribution.</p>
<img src='./assets/DEEJ_SCHEMATICS.png', width='100%'>
<h3>Tinkering with Software:</h3>
<p>Once the hardware was up and running, it was time to dive into the software side of things. Configuring deej is a piece of cake â€“ just whip up a simple YAML file to map sliders to your favorite apps and devices, and you're good to go. The lightweight desktop client, written in Go and a simple ass arduino code that converts all the analog signals from the potentiometers to sweet digital signals [0-1024], plays nice with your system and gives you real-time control over app volumes !</p>
<h3>Experience</h3>
<p>There is something satisfying about tweaking the volume with a physical slider, the software seems a little laggy at times, it does not auto detect the contorller after re-connecting it - nothing that cannot be changed with a few lines of GO code, the hardware can become a pain sometimes if the potentiometers are not the best quality available specially the one that rotates there can be a lot of signal errors that comes with it, but overall given the thing is opensource and you can just improve on whatever you want the thing is a beast !</p>
<img src='./assets/DEEJ_CONTROLLER.jpg', width='100%'>
<p>My DEEJ controller is just a random box with all the electronics (I should learn CAD and get a 3D printer), I have controllers for <b>Brave</b>, <b>Spotify</b>, <b>Discord</b> and some extra controllers for <b>Master</b> which is basically for every process and <b>MISC</b> which is for everything except <b>Brave</b>,<b>Spotify</b> and <b>Discord</b>.</p>
<p><i>Disclaimer: The opinions expressed in this review are solely my own and do not reflect the views of any organization or entity.</i></p>

    </body>
</html>
